<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Reminder App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="background">
        <div class="glow-orb orb-1"></div>
        <div class="glow-orb orb-2"></div>
        <div class="glow-orb orb-3"></div>
    </div>

    <div class="container">
        <div class="header">
            <div class="logo-container">
                <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5.8 11.3 2 22l10.7-3.79"></path>
                    <path d="M4 3h.01"></path>
                    <path d="M22 8h.01"></path>
                    <path d="M15 2h.01"></path>
                    <path d="M22 20h.01"></path>
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="m9 9 1.5 1.5L13 8"></path>
                </svg>
            </div>
            <h1>Birthday Reminder</h1>
            <p class="subtitle">Never miss celebrating special moments</p>
        </div>

        <div class="glass-card">
            <div class="card-glow"></div>

            <form id="birthdayForm">
                <div class="form-group">
                    <label for="username">Full Name</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <input type="text" id="username" name="username" placeholder="John Doe" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                        </svg>
                        <input type="email" id="email" name="email" placeholder="john@example.com" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="date">Date of Birth</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
                            <line x1="16" x2="16" y1="2" y2="6"></line>
                            <line x1="8" x2="8" y1="2" y2="6"></line>
                            <line x1="3" x2="21" y1="10" y2="10"></line>
                        </svg>
                        <input type="date" id="date" name="date" required>
                    </div>
                </div>

                <div id="message" class="message" style="display: none;"></div>

                <button type="submit" id="submitBtn" class="submit-btn">
                    Save Birthday
                </button>
            </form>
        </div>

        <p class="footer-text">
            We'll send birthday wishes automatically when the special day arrives
        </p>
    </div>

    <script>
        const form = document.getElementById('birthdayForm');
        const submitBtn = document.getElementById('submitBtn');
        const messageDiv = document.getElementById('message');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            submitBtn.disabled = true;
            submitBtn.textContent = 'Saving...';
            messageDiv.style.display = 'none';

            const formData = {
                username: document.getElementById('username').value,
                email: document.getElementById('email').value,
                date: document.getElementById('date').value
            };

            try {
                const response = await fetch('http://localhost:3000/save-birthday', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();

                if (response.ok) {
                    showMessage(data.message, 'success');
                    form.reset();
                } else {
                    showMessage(data.error || data.message || 'Something went wrong', 'error');
                }
            } catch (error) {
                showMessage('Failed to connect to the server. Please try again.', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Save Birthday';
            }
        });

        function showMessage(text, type) {
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
        }
    </script>
</body>
</html>
